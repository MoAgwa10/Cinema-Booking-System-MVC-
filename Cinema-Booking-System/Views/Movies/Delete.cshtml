@model Movie

@{
    ViewData["Title"] = "Delete Movie";
}

<div class="row">
    <div class="col-md-8 offset-2">
        @if (TempData["Error"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                @TempData["Error"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        <div class="alert alert-danger" role="alert">
            <h4 class="alert-heading">Delete Movie</h4>
            <p>Are you sure you want to delete this movie?</p>
            <hr>
            <p class="mb-0">This action cannot be undone.</p>
        </div>

        <div class="card mb-3">
            <div class="row g-0">
                <div class="col-md-12">
                    <div class="card-header text-white bg-danger">
                        <h5 class="card-title">
                            @Model.Name
                        </h5>
                    </div>
                </div>

                <div class="col-md-4">
                    <img src="@Model.ImageUrl" width="100%" alt="@Model.Name" />
                </div>

                <div class="col-md-8">
                    <div class="card-body">
                        <p class="card-text">@Model.Description</p>
                        <p class="card-text"><b>Category: </b>@Model.movieCategory</p>
                        <p class="card-text"><b>Start Date: </b>@Model.Startdate.ToString("dd MMM yyyy")</p>
                        <p class="card-text"><b>End Date: </b>@Model.Enddate.ToString("dd MMM yyyy")</p>
                        <p class="card-text"><b>Price: </b>@Model.Price.ToString("c")</p>

                        <p class="card-text">
                            <b>Producer: </b>
                            @if (Model.Producer != null)
                            {
                                @Model.Producer.FullName
                            }
                        </p>

                        <p class="card-text">
                            <b>Actor(s): </b>
                            @if (Model.Actor_Movies != null && Model.Actor_Movies.Any())
                            {
                                @string.Join(", ", Model.Actor_Movies.Select(am => am.Actor.FullName))
                            }
                            else
                            {
                                <span class="text-muted">No actors assigned</span>
                            }
                        </p>

                        <p class="card-text">
                            <b>Cinema(s): </b>
                            @if (Model.Movies_Cinemas != null && Model.Movies_Cinemas.Any())
                            {
                                @string.Join(", ", Model.Movies_Cinemas.Select(mc => mc.Cinema.FullName))
                            }
                            else
                            {
                                <span class="text-muted">No cinema assigned</span>
                            }
                        </p>
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="card-footer">
                        <form asp-action="Delete">
                            <input type="hidden" asp-for="id" />
                            <div class="row">
                                <div class="col-md-6">
                                    <a class="btn btn-outline-secondary" asp-action="Index">
                                        <i class="bi bi-arrow-left"></i> Back to List
                                    </a>
                                </div>
                                <div class="col-md-6">
                                    <input type="submit" value="Delete" class="btn btn-danger float-right" />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
